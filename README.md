# Unity Interactive Puzzle & Event System

이 프로젝트는 Unity 엔진을 사용하여 제작된 상호작용 퍼즐 및 아이템 이벤트 시스템 예제입니다.  
코드에서는 커스텀 속성, 리플렉션, 이벤트 위임을 활용하여 다양한 게임 오브젝트 간의 상호작용과 퍼즐 해결 과정을 유연하게 처리할 수 있도록 설계되었습니다.

---

## 주요 기능

- **커스텀 속성 기반 이벤트 등록**  
  - `[ItemEvent]` 속성을 사용하여 아이템 코드와 연결된 이벤트 메소드를 자동으로 검색하고 등록합니다.
  - `EventContainer` 클래스는 리플렉션을 통해 이 속성이 붙은 메소드를 딕셔너리에 매핑하여, 아이템 사용 시 동적으로 해당 이벤트를 실행합니다.

- **동적 아이템 상호작용**  
  - 아이템 사용 시, 이벤트 핸들러를 통해 다양한 기능(예: 디버그 로그 출력, 체스 퍼즐 조각 배치, 문 열기, 식물에 물주기 등)을 실행합니다.
  - `ItemHandler`와 `PuzzleHandler`를 통해 아이템 데이터와 퍼즐 로직을 분리하여 관리합니다.

- **플레이어 레이캐스트 인터랙션**  
  - `PlayerRaycast` 스크립트는 플레이어 카메라 피벗을 기준으로 레이캐스트를 수행하여, 아이템 및 인터랙티브 오브젝트와의 상호작용을 감지합니다.
  - 상호작용 가능한 오브젝트에 대해 UI에 정보 표시 및 클릭/입력 이벤트를 처리합니다.

- **ScriptableObject 기반 아이템 데이터 관리**  
  - `Item` ScriptableObject를 통해 아이템의 이름, 설명, 코드, 그리고 기타 속성(예: 카메라 존재 여부)을 유연하게 관리할 수 있습니다.

- **퍼즐 및 UI 관리**  
  - 체스 퍼즐과 식물 퍼즐 등 다양한 퍼즐 로직이 구현되어 있으며, 정답 체크 및 퍼즐 완료 시 동작(예: 열쇠 획득)을 자동으로 처리합니다.
  - `GameEscUI` 스크립트를 통해 게임 내 ESC 메뉴 및 챕터 진행, 옵션 설정 등을 관리합니다.

---

## 프로젝트 구조

- **EventContainer.cs**  
  - 커스텀 `[ItemEvent]` 속성이 붙은 메소드를 자동으로 검색하여, 아이템 코드와 연관된 이벤트를 딕셔너리에 등록합니다.
  - 체스 퍼즐 조각 배치, 문 열기, 식물에 물주기 등 다양한 이벤트를 처리하는 메소드들을 포함합니다.

- **PlayerRaycast.cs**  
  - 플레이어 카메라의 방향으로 레이캐스트를 수행하여, 아이템 및 퍼즐 오브젝트와의 상호작용을 감지합니다.
  - 아이템 픽업, UI 정보 표시, 상호작용 가능한 오브젝트의 이벤트 실행을 담당합니다.

- **ItemHandler.cs**  
  - 개별 아이템 인스턴스를 관리하며, 아이템의 사용 이벤트에 등록된 메소드를 실행합니다.
  - ScriptableObject인 `Item` 데이터를 기반으로 아이템의 이름, 설명 등의 정보를 제공합니다.

- **Item.cs**  
  - 아이템의 메타데이터(이름, 설명, 코드, 카메라 존재 여부 등)를 저장하는 ScriptableObject입니다.

- **Plant.cs**  
  - `PuzzleHandler`를 상속받아 식물 퍼즐을 구현합니다.
  - 물주기 이벤트, 성장 애니메이션, 색상 변경 및 퍼즐 완료 처리를 담당합니다.

- **GameEscUI.cs**  
  - 게임 내 ESC 메뉴 UI를 관리하며, 챕터 진행, 옵션 설정, 메인 메뉴 전환 등의 기능을 제공합니다.
  - 버튼 이벤트 등록 및 오디오 설정(배경음, 효과음) 기능을 포함합니다.

---

## 설치 및 사용법

1. **프로젝트 클론 및 설정**  
   - 이 저장소를 클론하거나 다운로드합니다.  
   - Unity (권장 버전: 2020.3 LTS 이상)에서 프로젝트를 엽니다.  
   - 필요한 패키지(Cinemachine, TextMeshPro 등)를 Unity Package Manager를 통해 설치합니다.

2. **씬 구성**  
   - `EventContainer`, `Player`, `ItemHandler`, `InteractiveItemHandler`, `PuzzleHandler` 등 주요 컴포넌트를 씬에 배치합니다.
   - UI 요소(TextMeshProUGUI, Button 등)를 배치한 후, `GameEscUI` 스크립트의 Inspector에서 참조를 설정합니다.

3. **아이템 및 퍼즐 설정**  
   - ScriptableObject를 활용하여 새로운 아이템 데이터를 생성하고, 아이템 코드와 설명을 설정합니다.
   - `[ItemEvent]` 속성을 사용하여, 새로운 아이템 이벤트 메소드를 추가할 수 있습니다.

4. **플레이 테스트**  
   - 플레이어의 레이캐스트를 통해 아이템 감지 및 상호작용이 정상적으로 작동하는지 확인합니다.
   - 퍼즐(예: 체스 퍼즐, 식물 퍼즐) 이벤트가 올바르게 처리되는지 테스트합니다.

---

## 기여 방법

- **이슈 제기 및 토론**  
  - 버그 신고, 기능 개선 아이디어 또는 일반적인 토론은 [Issues](https://github.com/your-repo/issues)에 등록해주세요.

- **Pull Request**  
  - 저장소를 Fork한 후, 변경 사항을 커밋하고 Pull Request를 보내주시면 검토 후 병합합니다.

---

## 라이선스

이 프로젝트는 MIT 라이선스에 따라 배포됩니다. 자세한 내용은 [LICENSE](LICENSE) 파일을 참고하세요.

---

## 참고 자료

- Unity 공식 문서 및 튜토리얼
- 다양한 Unity 커뮤니티 및 포럼 자료

---

이 프로젝트는 Unity를 기반으로 한 인터랙티브 퍼즐 및 이벤트 시스템을 구현하고자 하는 개발자들에게 유용한 참고 자료로 활용될 수 있습니다. 추가적인 개선 사항이나 기능 제안이 있다면 언제든지 기여해 주시기 바랍니다.
